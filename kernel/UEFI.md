기존 바이오스는 16비트 CPU아키텍쳐에, 1MB메모리 제한이 있었어. 현대 시스템은 64비트까지 이전하다보니 이걸론 부족한거지. 그래서 바이오스를 보완 / 대체하기 위해 새롭게 나온게 UEFI야. 



컴퓨터 하드웨어가 복잡해짐에 따라, [[16비트 리얼 모드]]와 1MB 메모리 제한에 갇혀 있던 레거시 BIOS의 기술적 부채를 청산하고 현대적인 64비트 하드웨어 자원을 운영체제 로딩 전 단계부터 효율적으로 제어하기 위해 등장했습니다.


## 구현 및 동작 원리 (The 'How')

**UEFI(Unified Extensible Firmware Interface)** 는 하드웨어 펌웨어와 운영체제 사이의 중간 매개체 역할을 하는 소프트웨어 규격입니다. 단순한 '부팅 프로그램'을 넘어, 그 자체로 하나의 작은 운영체제처럼 동작하며 다음과 같은 구체적인 하드웨어 제어 메커니즘을 가집니다

### 1. 부팅 시퀀스의 상태 변화 (State Transition)

UEFI 부팅은 레거시 BIOS의 단순한 MBR(Master Boot Record) 섹터 실행 방식과 달리, 고도로 구조화된 단계를 거칩니다.

1. **SEC (Security) Phase**: 전원이 켜진 직후 CPU 초기화 및 신뢰 체계([[Root of Trust]])를 구축합니다.
    
2. **[[PEI]] (Pre-[[EFI]] Initialization) Phase**: 최소한의 메모리를 초기화하여 다음 단계를 위한 환경을 준비합니다.
    
3. **[[DXE]] (Driver Execution Environment) Phase**: **가장 핵심적인 단계**로, 수많은 DXE 드라이버가 로드되어 네트워크, 스토리지, PCI 장치 등을 초기화합니다.
    
4. **[[BDS]] (Boot Device Selection) Phase**: [[NVRAM]]에 저장된 설정값에 따라 부팅 디바이스를 선택하고 OS 로더(`bootx64.efi` 등)를 실행합니다.
    
5. **[[TSL]] (Transient System Load)**: OS 커널이 제어권을 넘겨받기 직전의 과도기 상태입니다.
    
6. **RT (Runtime)**: OS가 완전히 로드된 후에도 UEFI는 서비스(시간 설정, 변수 관리 등)를 OS에 제공합니다.
### 2. 레거시 BIOS와의 결정적 차이

| **특징**           | **Legacy BIOS**          | **UEFI**                             |
| ---------------- | ------------------------ | ------------------------------------ |
| **동작 모드**        | 16비트 [[Real Mode]]       | 32/64비트 [[Protected Mode]]           |
| **주소 지정 가능 메모리** | 1MB (상당히 제한적)            | CPU가 지원하는 전체 메모리                     |
| **파티션 방식**       | [[MBR]] (최대 2TB, 파티션 4개) | [[GPT]] (최대 8[[ZB]], 파티션 무제한)        |
| **드라이버 모델**      | 하드웨어 종속적 인터럽트(INT)       | [[EFI]] Byte Code (EBC)를 통한 하드웨어 독립성 |
| **보안**           | 없음                       | Secure Boot (디지털 서명 확인)              |
### 3. 기술적 핵심: EFI 시스템 파티션 (ESP)

UEFI는 하드 디스크의 특정 섹터에 코드를 숨기지 않습니다. 대신 **[[FAT32]]** 형식으로 포맷된 **[[ESP]](EFI System Partition)** 라는 일반적인 파티션을 사용합니다. 여기에 `.efi` 확장자를 가진 실행 파일 형태로 부트로더가 존재하며, UEFI 펌웨어는 파일 시스템을 직접 인식하여 이 파일을 읽어옵니다.

예전 BIOS는 디스크의 특정 섹터에 코드를 숨겨놨나봐. ESP라는 포멧으로 파티션을 만들고 이 파티션을 읽을 수 있는 시스템? 을 갖춰서 UEFI펌웨어 자체가 이 파티션을 인식하고, 메타데이터를 읽어오는 것 같아. .efi 라는 확장이 있대. 이건 efi와 관계가 있겠지?